<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Random Image API</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #000;
    }
    img {
      max-width: 100%;
      max-height: 100%;
    }
  </style>
</head>
<body>
<script>
(async () => {
  const ua = navigator.userAgent;
  const isMobile = /iPhone|iPad|iPod|Android/i.test(ua);
  const orientationPref = isMobile ? 'portrait' : 'landscape';

  const res = await fetch('images.json');
  const data = await res.json();

  const candidates = data[orientationPref] || [];
  const all = [...(data.landscape || []), ...(data.portrait || [])];

  const selected = candidates.length > 0
    ? candidates[Math.floor(Math.random() * candidates.length)]
    : all[Math.floor(Math.random() * all.length)];

  const cleanPath = selected.replace(/^\/+/, '');
  const fullUrl = selected.startsWith('http') 
      ? selected 
      : `${location.origin}${location.pathname}${cleanPath}`;

  // 创建 img 元素显示图片，不跳转
  const img = document.createElement('img');
  img.src = fullUrl;
  document.body.appendChild(img);
})();
</script>
</body>
</html>
